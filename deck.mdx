import { Image } from 'mdx-deck'
import { H1, H2, P, BImage } from './components'
export { components } from 'mdx-deck-code-surfer'
export { default as theme } from './components/theme'

<H1>Functional Lenses in JavaScript</H1>

<H2>Lambda World C√°diz 2018</H2>

<P>@FlavioCorpa</P>

<BImage src='images/lense.jpeg' />

---

<Image src='images/lambda.jpg' />

---

`$ whoami`

---

<Image src='images/egghead.png' />

---

<Image src='images/reason.png' />

---

Let's begin! üöÄ

---

**Lenses** are basically functional _getters_ and _setters_

---

...but first...

---

# JavaScript!?!?!?

---

<iframe width="560" height="315" src="https://www.youtube.com/embed/eetWam3nhoM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>

---

Now we can proceed ü§ì

---

But first, we need our own _curry_ function! üçõ

---

```js The Ultimate Curry Implementation üçõ
const curry = (f, arity = f.length, ...args) =>
  arity <= args.length
    ? f(...args)
    : (...argz) => curry(f, arity, ...args, ...argz)
----
* > the code...
1[9:13] > Here's all the magic ‚ú®
2
3
4
```

---

<Image src='https://media.giphy.com/media/XyLwEmBGqxkti/giphy.gif' />

---

```js Usage
const obj = {
  people: {
    me: {
      friends: [
        { name: 'Kike', brother: true },
        { name: 'Samuel' },
        { name: 'Jos√©' },
        { name: 'Josu√©' },
      ],
      habilities: [],
    },
  },
}

const bf = lensPath(['people', 'me', 'friends', 0, 'name'])

view(bf, obj) // > Kike
set(bf, 'Mike', obj) // > Object(...[{name:'Mike'}])
----
* > Let's have a look!
1:13 > Image you have this some-what complex object...
15 > Here is where lenses shine! ‚ú®
17 > Now I can view my bestie...
18 > Or even change it if I feel like it! üíÅüèº‚Äç‚ôÄÔ∏è
```

---

...specific lenses for very specific use-cases??? ü§î

---

Lenses are **composable** üöÄ

---

Wait... can we compose in JavaScript!? üò±

---

```js
const compose = (...fns) => args => fns.reduceRight((x, f) => f(x), args)
----
* > Self explanatory...
```

---

```js
/**
 * Generic lenses
 */
const enabledLens = lensPath(['enabled'])

/**
 * Combined lenses
 */

const sshServiceLens = lensPath(['sshService'])
const sshServiceEnabledLens = compose(
  sshServiceLens,
  enabledLens
)

const telnetServiceLens = lensPath(['telntService'])
const telnetServiceEnabledLens = compose(
  telnetServiceLens,
  enabledLens
)

/**
 * Usage
 */

const services = {
  sshService: { enabled: true },
  telnetService: { enabled: false },
}

console.assert(view(sshServiceEnabledLens, services) === true)
console.assert(view(telnetServiceEnabledLens, services) === false)
----
* > Composing lenses (left->right)
```

---

# Thanks! ‚ò∫Ô∏è

---

<Image src='images/ending.png' />
